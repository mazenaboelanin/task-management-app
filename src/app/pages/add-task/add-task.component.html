<h2 class="text-center p-4">Add Task</h2>

<div class="container">

  <button type="button" class="btn btn-primary mb-3" [routerLink]="['']">Back</button>

  <form [formGroup]="taskForm">

    <div class="title-section mb-3">
      <label class="form-label">
        Title <label class="required-symbol">*</label>
      </label>
      <input
        [ngClass]="{'required': (isFormSubmitted && taskForm.get('title').invalid) ||
        (taskForm.get('title').invalid && taskForm.get('title').errors) &&
        (taskForm.get('title').dirty || taskForm.get('title').touched)}"
        id="title" formControlName="title" type="text" class="form-control" placeholder="Task Title">

        <app-error
          [taskForm]="taskForm"
          formField="title"
          [isFormSubmitted]="isFormSubmitted">
        </app-error>
    </div>

    <div class="description-section mb-3">
      <label class="form-label">
        Description <label class="required-symbol">*</label>
      </label>
      <textarea
        [ngClass]="{'required': (isFormSubmitted && taskForm.get('description').invalid) ||
        (taskForm.get('description').invalid && taskForm.get('description').errors) &&
        (taskForm.get('description').dirty || taskForm.get('description').touched)}"
        formControlName="description" class="form-control" rows="3" placeholder="Task Description"></textarea>

        <app-error
          [taskForm]="taskForm"
          formField="description"
          [isFormSubmitted]="isFormSubmitted">
        </app-error>
    </div>

    <div class="priority-section mb-3">
      <label  class="form-label">
        Priority <label class="required-symbol">*</label>
      </label>
      <div class="form-check">
        <label class="form-check-label">
          <input type="radio" value="1" formControlName="priority" class="form-check-input">
          High Priority
        </label>
      </div>

      <div class="form-check">
        <label class="form-check-label">
          <input type="radio" value="2" formControlName="priority" class="form-check-input">
          Low Priority
        </label>
      </div>

      <app-error
        [taskForm]="taskForm"
        formField="priority"
        [isFormSubmitted]="isFormSubmitted">
      </app-error>
    </div>

    <div class="state-section mb-3">
      <label  class="form-label">
        State <label class="required-symbol">*</label>
      </label>
      <select
        [ngClass]="{'required': (isFormSubmitted && taskForm.get('state').invalid) ||
        (taskForm.get('state').invalid && taskForm.get('state').errors) &&
        (taskForm.get('state').dirty || taskForm.get('state').touched)}"
        formControlName="state" class="form-select" >
        <option value="todo">Todo</option>
        <option value="inprogress">Inprogress</option>
        <option value="done">Done</option>
      </select>

      <app-error
        [taskForm]="taskForm"
        formField="state"
        [isFormSubmitted]="isFormSubmitted">
      </app-error>
    </div>

    <button
      class="btn btn-success mb-3 me-3"
      (click)="submitTask()">
      Add Task
    </button>
    <button
      class="btn btn-danger mb-3"
      (click)="clearFormData()">
      Clear
    </button>
  </form>
</div>

